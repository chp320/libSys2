<template>
  <h2 class="boxTest">ëŒ€ì¶œí•˜ê¸° í˜ì´ì§€</h2>
  <router-link to="/">ë©”ì¸í˜ì´ì§€ ì´ë™</router-link>
  <hr><br><br><br>

  <div>
<!--    1st (no) -->
<!--    <CheckUserPage v-if="!isUserVerified" @user-verified="userVerifiedHandler" />-->
<!--    <div v-else>-->
<!--      <h1>ëŒ€ì¶œí•˜ê¸° í˜ì´ì§€</h1>-->
<!--    </div>-->

<!--    2nd (no) -->
<!--    <CheckUserPage @user-verified="showLendPage" @error="handleError"/>-->
<!--    <div v-if="isUserVerified">-->
<!--      <h1>ëŒ€ì¶œí•˜ê¸° í˜ì´ì§€</h1>-->
<!--    </div>-->
<!--    <p v-else-if="error">{{ error }}</p>-->
<!--  </div>-->

<!--    3rd (yes) -->
    <!-- userIDë¡œ verified ë˜ì§€ ì•Šì€ ê²½ìš° CheckUserPage ë§Œ ë…¸ì¶œ-->
    <CheckUserPage v-if="!isUserVerified" @user-verified="showLendPage" @error="handleError"/>

    <!-- userIDë¡œ verified ëœ ê²½ìš° LendPage ë§Œ ë…¸ì¶œ -->
    <div v-else>
      <div class="lend-page">
        <h1>ğŸ“š ëŒ€ì¶œí•˜ê¸° í˜ì´ì§€ ğŸ“š</h1>
<!--        <p>íšŒì›ë²ˆí˜¸: {{ userID }}</p>-->
        <p>ì•ˆë…•í•˜ì„¸ìš”, {{ userName }}ë‹˜~</p>

        <div class="search-section">
          <input type="text" v-model="searchQeury" placeholder="ë°”ì½”ë“œë¥¼ ì½ê±°ë‚˜ ì…ë ¥í•´ ì£¼ì„¸ìš”." />
          <button @click="serachBook">ë„ì„œ ê²€ìƒ‰</button>
        </div>

        <div v-if="alertMessage" class="alert">{{ alertMessage }}</div>
      </div>

    </div>

    <!-- error ë°œìƒ ì‹œ error message ë…¸ì¶œ -->
    <p v-if="error">{{ error }}</p>

<!--    4th (no) -->
<!--    <CheckUserPage @user-verified="showLendPage" @error="handleError" />-->
<!--    <div v-if="isUserVerified">-->
<!--      <h1>ëŒ€ì¶œí•˜ í˜ì´ì§€</h1>-->
<!--      <p>íšŒì›ë²ˆí˜¸: {{ userID }}</p>-->
<!--      <p>íšŒì›ì´ë¦„: {{ userName }}</p>-->
<!--    </div>-->
<!--    <p v-else-if="error">{{ error }}</p>-->

  </div>
</template>

<script>
import CheckUserPage from "@/components/CheckUserPage.vue";

export default {
  components: {CheckUserPage},
  data() {
    return {
      isUserVerified: false,
      error: '',
      userID: '',
      userName: ''
    };
  },
  methods: {
    // userVerifiedHandler() {
    //   this.isUserVerified = true;
    // }
    showLendPage( { userID, userName } ) {
      this.isUserVerified = true;
      this.error = '';
      this.userID = userID;
      this.userName = userName;
    },
    handleError(message) {
      this.isUserVerified = false;
      this.error = message || 'ì‚¬ìš©ì ì—†ìŒ';
    }
  }
}
</script>

<style>
.boxTest {
  width: 200px;
  height: 50px;
  text-align: center;
  border: 1px solid #000;
}
</style>
